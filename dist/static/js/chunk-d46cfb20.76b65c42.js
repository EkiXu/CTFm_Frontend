(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d46cfb20"],{"3cb4":function(e,t,a){"use strict";a.r(t);var r,n,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",md:"10"}},[a("v-row",{staticStyle:{height:"48px"}}),a("RankCard",{attrs:{type:e.rank_categories[e.current_rank_category_id]}},[a("v-tabs",{model:{value:e.current_rank_category_id,callback:function(t){e.current_rank_category_id=t},expression:"current_rank_category_id"}},e._l(e.rank_categories,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("div",{staticClass:"scoreboard"},[a("v-tabs-items",{model:{value:e.current_rank_category_id,callback:function(t){e.current_rank_category_id=t},expression:"current_rank_category_id"}},e._l(e.rank_categories,(function(t){return a("v-tab-item",{key:t},[a("v-data-table",{attrs:{headers:e.headers,items:e.records,options:e.options,"server-items-length":e.page_count,"items-per-page":e.items_per_page,"hide-default-footer":"",loading:e.is_loading,"loading-text":"Loading... Please wait",height:"300","fixed-header":"","disable-sort":""},on:{"update:options":function(t){e.options=t}}})],1)})),1),a("div",{staticClass:"text-center pt-2"},[a("v-pagination",{attrs:{length:e.page_count},on:{input:e.getPaginationPage},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)],1)],1)],1)],1)},s=[],i=(a("e25e"),a("b85c")),c=(a("96cf"),a("1da1")),l=a("c1df"),d=a.n(l),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",e._b({staticClass:"rank_card--has-heading rank_card "},"v-card",e.$attrs,!1),[a("div",{staticClass:"d-flex grow flex-wrap"},[a("v-sheet",{staticClass:"text-start rank_card__heading chart_ring",attrs:{width:"100%",elevation:"6",dark:""}},[e.loaded?a("TrendCard",{staticStyle:{height:"250px",padding:"10px"},attrs:{chartdata:e.datacollection,options:e.chartOption}}):e._e()],1)],1),e._t("default")],2)},p=[],g=(a("b0c0"),a("5530")),_=a("2f62"),h=a("1fca"),f={extends:h["a"],props:{chartdata:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartdata,this.options)}},b=f,m=a("2877"),v=Object(m["a"])(b,r,n,!1,null,null,null),k=v.exports,x=a("f634"),y={components:{TrendCard:k},name:"RankCard",inheritAttrs:!1,props:{type:{type:String,default:null}},data:function(){return{loaded:!1,timeFormat:"YYYY-MM-DD HH:mm:ss",colorset:["#409eff","#fe9205","#f87979","#00bcd4","#39c7ba","#733c8b","#9a4a4c","#dd162a","#3f637b","#635e16"],datacollection:{datasets:[]},chartOption:{scales:{xAxes:[{ticks:{fontColor:"rgba(255, 255, 255, 0.7)"},gridLines:{borderDash:[1,4],color:"rgba(255, 255, 255, 0.6)",zeroLineBorderDash:[1,4],zeroLineColor:"rgba(255, 255, 255, 0.6)"},type:"time",time:{parser:this.timeFormat,tooltipFormat:this.timeFormat}}],yAxes:[{ticks:{beginAtZero:!0,fontColor:"rgba(255, 255, 255, 0.7)"},gridLines:{color:"rgba(255, 255, 255, 0.6)",borderDash:[1,4],zeroLineBorderDash:[1,4],zeroLineColor:"rgba(255, 255, 255, 0.6)"}}]},legend:{labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},bezierCurve:!1,scaleFontColor:"rgba(255, 255, 255, 0.7)",responsive:!0,maintainAspectRatio:!1}}},computed:Object(g["a"])({},Object(_["c"])("contest",["contestInfo"])),watch:{type:function(e,t){this.genTrend(e)}},mounted:function(){},methods:{genTrend:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loaded=!1,e.prev=1,"School"!=t.type){e.next=8;break}return e.next=5,Object(x["d"])();case 5:a=e.sent,e.next=17;break;case 8:if("Team"!=t.type){e.next=14;break}return e.next=11,Object(x["f"])();case 11:a=e.sent,e.next=17;break;case 14:return e.next=16,Object(x["g"])();case 16:a=e.sent;case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e["catch"](1),t.loaded=!0,e.abrupt("return");case 23:for(r in t.datacollection.datasets=[],a.data.rows){n=a.data.rows[r],o=n.records,s={},s="Team"==t.type?{label:n.name,borderColor:t.colorset[r],fill:!1,pointBackgroundColor:t.colorset[r],data:[]}:{label:n.nickname,borderColor:t.colorset[r],fill:!1,pointBackgroundColor:t.colorset[r],data:[]},s.data.push({x:d()(t.contestInfo.start_time).format(t.timeFormat),y:0}),c=Object(i["a"])(o);try{for(c.s();!(l=c.n()).done;)u=l.value,s.data.push({x:d()(u.date).format(t.timeFormat),y:u.points})}catch(p){c.e(p)}finally{c.f()}s.data.push({x:d()().isBefore(t.contestInfo.end_time)?d()().format(t.timeFormat):d()(t.contestInfo.end_time).format(t.timeFormat),y:n.current_points}),t.datacollection.datasets.push(s)}t.loaded=!0;case 26:case"end":return e.stop()}}),e,null,[[1,19]])})))()}}},C=y,w=(a("aa33"),a("6544")),O=a.n(w),j=a("b0af"),T=a("8dd9"),P=Object(m["a"])(C,u,p,!1,null,"d43d747c",null),R=P.exports;O()(P,{VCard:j["a"],VSheet:T["a"]});var S={components:{RankCard:R},data:function(){return{page:1,page_count:0,items_per_page:5,is_loading:!0,options:{},headers:[{text:"Rank",align:"start",sortable:!1,value:"rank"},{text:"Nickname",value:"nickname"},{text:"Points",value:"points"},{text:"Solved",value:"solved_amount"},{text:"Last Point Time",value:"last_point_at"}],rank_categories:["Team","User"],current_rank_category_id:null,records:[],challenges:[]}},watch:{current_rank_category_id:function(e,t){this.page=1;var a=(this.page-1)*this.items_per_page,r=this.items_per_page;this.records=[],this.genScoreboard(this.rank_categories[e],r,a)},options:{handler:function(){this.getPaginationPage()},deep:!0}},methods:{getPaginationPage:function(){var e=(this.page-1)*this.items_per_page,t=this.items_per_page;this.genScoreboard(this.rank_categories[this.current_rank_category_id],t,e)},genScoreboard:function(e,t,a){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,s,c,l,u,p,g,_,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.is_loading=!0,n.prev=1,"School"!=e){n.next=6;break}return n.next=5,Object(x["c"])(a,t);case 5:o=n.sent;case 6:if("Team"!=e){n.next=12;break}return n.next=9,Object(x["e"])(a,t);case 9:o=n.sent,n.next=15;break;case 12:return n.next=14,Object(x["b"])(a,t);case 14:o=n.sent;case 15:n.next=20;break;case 17:return n.prev=17,n.t0=n["catch"](1),n.abrupt("return");case 20:s=o.data.challenges,c=[],"Team"==e?(c=o.data.results,r.headers=[{text:"Rank",align:"start",sortable:!1,value:"rank"},{text:"Name",value:"name"},{text:"Points",value:"points"},{text:"Solved",value:"solved_amount"}]):(c=o.data.results,r.headers=[{text:"Rank",align:"start",sortable:!1,value:"rank"},{text:"Nickname",value:"nickname"},{text:"Points",value:"points"},{text:"Solved",value:"solved_amount"},{text:"Last Point Time",value:"last_point_at"}]),l=Object(i["a"])(s);try{for(l.s();!(u=l.n()).done;)p=u.value,r.headers.push({text:p.title,value:"challenge_"+p.id}),r.challenges.push({text:p.title,value:"challenge_"+p.id})}catch(b){l.e(b)}finally{l.f()}for(g in c){c[g].rank=a+parseInt(g)+1,c[g].last_point_at=d()(c[g].last_point_at,"YYYY-MM-DD HH:mm:ss").fromNow(),_=Object(i["a"])(c[g].solved_challenges);try{for(_.s();!(h=_.n()).done;)f=h.value,c[g]["challenge_"+f.challenge]="ðŸš©"}catch(b){_.e(b)}finally{_.f()}}r.records=c,r.page_count=parseInt(o.data.count/t),console.log(r.page_count),r.is_loading=!1;case 30:case"end":return n.stop()}}),n,null,[[1,17]])})))()}}},V=S,D=a("62ad"),F=a("a523"),L=a("8fea"),I=a("891e"),Y=a("0fd9"),z=a("71a3"),A=a("c671"),B=a("fe57"),H=a("aac8"),M=Object(m["a"])(V,o,s,!1,null,"2bfb3ae0",null);t["default"]=M.exports;O()(M,{VCol:D["a"],VContainer:F["a"],VDataTable:L["a"],VPagination:I["a"],VRow:Y["a"],VTab:z["a"],VTabItem:A["a"],VTabs:B["a"],VTabsItems:H["a"]})},aa33:function(e,t,a){"use strict";a("e93d")},e93d:function(e,t,a){}}]);